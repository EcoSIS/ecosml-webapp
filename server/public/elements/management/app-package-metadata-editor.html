<style include="shared-styles">
  :host {
    display: block;
    padding-bottom: 50px;
  }
  app-title-card {
    margin-bottom: 25px;
  }
  paper-button {
    color: var(--default-primary-color);
  }
  paper-button:hover {
    background: var(--default-background-color);
  }
  h2 {
    margin : 0 0 5px 0;
  }
  #unsavedMsg paper-button {
    color: var(--inverse-text-color);
    border: 1px solid var(--inverse-text-color);
  }
  #unsavedMsg paper-button:hover {
    color: var(--default-primary-color);
    border: 1px solid var(--default-primary-color);
  }
  #savedToast {
    --paper-toast-background-color: var(--default-primary-color);
    --paper-toast-color: var(--inverse-text-color);
  }

  iron-pages > div {
    padding: 40px;
    background: white;
  }

  app-text-input {
    display: block;
  }

  paper-tabs {
    --paper-tabs-selection-bar-color: var(--default-primary-color);
  }
  paper-tab {
    --paper-tab-ink: var(--default-primary-color);
  }

  app-file-manager {
    margin-bottom: 75px;
  }

  #commitMsg {
    display: block;
    width: 100%;
    box-sizing: border-box;
    margin-top: 20px;
  }

  #files {
    padding-bottom: 100px;
  }

  .examples {
    display: flex;
    align-items: center;
  }

  .examples :first-child {
    flex: 1;
  }

  .examples paper-button {
    font-size: 14px;
    color: var(--default-secondary-color);
  }

  [slot="help"] {
    margin-bottom: 20px;
  }

  .help {
    color: var(--secondary-text-color);
    font-size: 14px;
  }

</style>

<paper-toast id="savingToast" duration="0">
  <div id="unsavedMsg">
    <div>
      You have unsaved changes  
      <paper-button on-click="_onSaveChangesClicked">Commit Changes</paper-button> 
    </div> 
    <div>
      <input type="text" placeholder="Commit message" id="commitMsg">
    </div>
  </div>
  <div id="savingMsg">
    Committing...
  </div>
</paper-toast>
<paper-toast id="savedToast">
  Package Data Saved!
</paper-toast>

<div class="container">
  <div class="narrow-container">
    <h1>[[currentAction]] Package</h1>

    <paper-tabs hidden$="[[creating]]" selected="{{selectedSection}}" attr-for-selected="id">
      <paper-tab id="basicInformation">Basic Information</paper-tab>
      <paper-tab id="details">Details</paper-tab>
      <paper-tab id="files">Files</paper-tab>
      <paper-tab id="releasePanel">Releases</paper-tab>
    </paper-tabs>

    <iron-pages selected="[[selectedSection]]" attr-for-selected="id">
      <div id="basicInformation">
        <app-text-input  
          id="name" 
          label="Name" 
          on-keyup="_updateNamePreview" 
          on-change="_updateNamePreview"
          help="[[namePreview]]"
          hidden$="[[!creating]]">
        </app-text-input>

        <div hidden$="[[creating]]" class="help">Package Name</div>
        <h2 hidden$="[[creating]]">[[namePreview]]</h2>

        <app-text-input 
          id="overview" 
          label="[[schema.overview.label]]" 
          on-change="_onDataChange"
          help="[[schema.overview.description]]">
        </app-text-input>

        <app-org-input id="organization" on-change="_onDataChange"></app-org-input>

        <div style="text-align: right">
          <paper-button 
            hidden$="[[!creating]]" 
            id="createBtn"
            on-click="_onCreateBtnClicked">Create
          </paper-button>
        </div>
      </div>

      <div id="details">
        <app-markdown-editor label="Description" id="description" on-markdown-change="_onDataChange"></app-markdown-editor>
        <div class="help">[[schema.description.description]]</div>

        <app-keyword-input id="keywords" label="Keywords.  Comma Separate" on-keyword-change="_onDataChange"></app-keyword-input>
        <div class="help">[[schema.keywords.description]]</div>

        <app-theme-input id="theme" on-update="_onThemeUpdate"></app-theme-input>
      </div>

      <div id="files">
        <app-file-manager 
          label="Coefficients" 
          directory="/coefficients"
          color="lightblue">
          <div slot="help">Upload model coefficients.  These should be in CSV format.</div>
        </app-file-manager>
        
        <app-file-manager 
          label="Source" 
          directory="/main"
          color="green">
          <div slot="help">Upload model source code.</div>
        </app-file-manager>
        
        <app-file-manager 
          label="Papers" 
          directory="/papers"
          color="dark">
          <div slot="help">Upload any published work or additional documentation you wish
            to have associated with this package.  Can't provide the papers directly?  Feel 
            free to upload a simple text file with links to journal article(s).
          </div>
        </app-file-manager>


        <h2 class="examples uheader blue">
          <div>Examples</div>
          <paper-button on-click="_onCreateExampleClicked">
            <iron-icon icon="add"></iron-icon> Create
          </paper-button>
        </h2>

        <div class="help">
          Given a small (less than 100) sample
          of spectra and optional transform the model should produce the exact output file provided.
          Examples provide two very important features.:
          
          <ul>
            <li>
                The example code will be tested and if the provided spectra input matches the 
                provided model output the package will be given a 
                <span style="color:green">Verified</span> status.
            </li>
            <li>
                Examples are a great way for others to learn about the model and see it in action.  
                A quality example can go a long way to showing others how they can use the model 
                for their own purposes.
            </li>
          </ul>
        </div>

        <template is="dom-repeat" items="[[examples]]">
          <app-example-editor 
            label="[[item.label]]" 
            directory="[[item.directory]]"
            open="[[item.isNew]]">
          </app-example-editor>
        </template>

      </div>

      <div id="releasePanel">
        <app-create-release id="release"></app-create-release>
      </div>

      <div>
        <paper-button on-click="_onDeleteBtnClicked">Delete Package</paper-button>
      </div>
    </iron-pages>
  </div>
</div>